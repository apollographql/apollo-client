---
title: '@defer support'
description: The @defer directive and Apollo Client
---

> ⚠️ **Defer is a [Stage 1 GraphQL specification proposal](https://github.com/graphql/graphql-spec/blob/main/CONTRIBUTING.md#stage-1-proposal).** Before it reaches acceptance, it might still change in backward incompatible ways. If you have feedback on it, please let us know via [GitHub issues](https://github.com/apollographql/apollo-client/issues/new?assignees=&labels=&template=bug.md)

Apollo Web Client supports [the `@defer` directive](https://github.com/graphql/graphql-wg/blob/main/rfcs/DeferStream.md), which allows receiving the fields of certain fragments of a query asynchronously.

For instance consider a service where retrieving basic information from a user is fast, but retrieving the user's friends may take more time. In that case it would make sense to display the basic information in the UI as soon as they arrive, and display a loading indicator in the UI while waiting for the friends.

Applying the `@defer` directive to the fragment selecting the friends fields indicates that we are ready to receive them later, asynchronously:

```graphql
query PersonQuery($personId: ID!) {
  person(id: $personId) {
    # Basic fields (fast)
    id
    firstName
    lastName

    # Friends (slow)
    ... on User @defer {
      friends {
        id
      }
    }
  }
}
```

## Code Generation

If you currently use [GraphQL Code Generator](https://www.the-guild.dev/graphql/codegen) for your CodeGen needs, be advised it doesn't yet support the use of the `@defer` directive in the code output.

You can refer to this [issue](https://github.com/dotansimha/graphql-code-generator/issues/7885) in the Github project for reference.



