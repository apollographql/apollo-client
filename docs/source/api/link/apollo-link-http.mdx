---
title: HTTP Link
description: Get GraphQL results over a network using HTTP fetch.
---

<DocBlock
  canonicalReference="@apollo/client/link/http!HttpLink:class"
  customOrder={["summary", "remarks", "example"]}
/>

## Handling errors

`HttpLink` distinguishes between client errors, server errors, and GraphQL errors. You can add the [`ErrorLink`](./apollo-link-error) to your link chain to handle these errors via a [callback](./apollo-link-error#options).

The following types of errors can occur:

| Error          | Description                                                                                                            | Callback | Error Type                                                 |
| -------------- | ---------------------------------------------------------------------------------------------------------------------- | :------: | ---------------------------------------------------------- |
| Client Parse   | The request body is not serializable, for example due to a circular reference.                                         | `error`  | `ClientParseError`                                         |
| Server Parse   | The server's response cannot be parsed ([response.json()](https://developer.mozilla.org/en-US/docs/Web/API/Body/json)) | `error`  | [`ServerParseError`](../errors/ServerParseError)           |
| Server Network | The server responded with a non-2xx HTTP code.                                                                         | `error`  | [`ServerError`](../errors/ServerError)                     |
| Server Data    | The server's response didn't contain `data` or `errors`.                                                               | `error`  | [`ServerError`](../errors/ServerError)                     |
| GraphQL Error  | Resolving the GraphQL operation resulted in at least one error, which is present in the `errors` field.                |  `next`  | [`CombinedGraphQLErrors`](../errors/CombinedGraphQLErrors) |

See the documentation on [Identifying error types](../../data/error-handling#identifying-error-types) to learn how to distinguish between the different error types.

## Operation results

After your GraphQL endpoint (successfully) responds with the result of the sent operation, `HttpLink` sets it as the `response` field of the operation `context`. This enables each previous link in your link chain to interact with the response before it's returned.

## Customizing `fetch`

You can provide a custom [`fetch` option](#options-fetch) to the `HttpLink` constructor to enable many custom networking needs. For example, you can modify the request based on calculated headers or calculate the endpoint URI based on the operation's details.

If you're targeting an environment that doesn't provide the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) (such as older browsers or the server) you can provide a different implementation of `fetch`. We recommend [`unfetch`](https://github.com/developit/unfetch) for older browsers and [`node-fetch`](https://github.com/bitinn/node-fetch) for running in Node.

### Custom auth

This example adds a custom `Authorization` header to every request before calling `fetch`:

```js
const customFetch = (uri, options) => {
  const { header } = Hawk.client.header(
    "http://example.com:8000/resource/1?b=1&a=2",
    "POST",
    { credentials: credentials, ext: "some-app-data" }
  );
  options.headers.Authorization = header;
  return fetch(uri, options);
};

const link = new HttpLink({ fetch: customFetch });
```

### Dynamic URI

This example customizes the endpoint URL's query parameters before calling `fetch`:

```js
const customFetch = (uri, options) => {
  const { operationName } = JSON.parse(options.body);
  return fetch(`${uri}/graph/graphql?opname=${operationName}`, options);
};

const link = new HttpLink({ fetch: customFetch });
```

## Types

<InterfaceDetails
  canonicalReference="@apollo/client/link/http!HttpLink.Options:interface"
  headingLevel={3}
  displayName="HttpLink.Options"
/>

<InterfaceDetails
  canonicalReference="@apollo/client/link/http!HttpLink.ContextOptions:interface"
  headingLevel={3}
  displayName="HttpLink.ContextOptions"
/>

<InterfaceDetails
  canonicalReference="@apollo/client/link/http!HttpLink.HttpOptions:interface"
  headingLevel={3}
  displayName="HttpLink.HttpOptions"
/>
