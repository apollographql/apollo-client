# Documentation specific instructions
Documentation can be found in the `docs/` directory and in the `src/` directory as DocBlocks.

## Data sources
See @docs/source/_sidebar.yaml for the documentation structure.
DocBlocks can contain comments in the form `{@inheritDoc @apollo/client!QueryOptionsDocumentation#query:member}` to (in this example) include the DocBlock of the `query` member on the `QueryOptionsDocumentation` interface. `@apollo/client!QueryOptionsDocumentation#query:member` is called a "canonical reference" and is used to uniquely identify a DocBlock.
An accumulation of all DocBlocks and their canonical references can be found in @docs/public/client.api.json. This file is generated from the source code by running `npm run docmodel`.
All .json files in the `docs/public/` directory are autogenerated. They can be read, but not modified. Instead, the respective source files in the `src/` directory should be modified, and the JSON file should be regenerated by running `npm run docmodel`.

## Available components
Documentation can reference types and interfaces by including these JSX tags:
- `<FunctionDetails canonicalReference="@apollo/client!ObservableQuery#getCurrentResult:member(1)" headingLevel={3} result={false} parameters={false} />` for functions and class methods.
  The props of `FunctionDetails` follow this shape:
```ts
  {
    /** canonical reference of the DocBlock to include. */
    canonicalReference: string;
    /** describes the nesting depth of the main heading for the markdown generated by this codeblock */
    headingLevel: number;
    /** can be set to `false` to hide the result and parameters sections in the generated Docs page - this is useful if the parameters are not well documented */
    parameters?: boolean;
    /** can be set to `false` to hide the result and parameters sections in the generated Docs page - this is useful if the parameters are not well documented */
    result?: boolean;
    /** can be used to override the autogenerated rendered content of the `result` section */
    children?: React.ReactNode;
  }
```
  This tag will create documentation like this:
````md
  ### getCurrentResult
  <DocBlock deprecated remarks releaseTag />
  #### Example (if available in the DocBlock)
  ```ts
  [example code here]
  ```
  #### Signature
  ```ts
  [the function signature here]
  ```
  #### Parameters
  [a table of parameters with types and descriptions]
  #### Result
  [the type of the result]
````
- `<InterfaceDetails canonicalReference="@apollo/client!DocumentationTypes.ApolloQueryResult:interface" headingLevel={3} displayName={"ApolloQueryResult"} />` to reference inferfaces.
  The props of `InterfaceDetails` follow this shape:
```ts
{
  canonicalReference: string;
  headingLevel: number;
  /** an array of property names that should be displayed in the order they are defined, instead of the default alphabetical order */
  customPropertyOrder?: string[];
  /** can be used to override the heading, which would usually just be the name of the interface. This is useful if the interface name only makes sense in the context of a namespace, such as `useQuery.Result` instead of `Result`, which would be too generic */
  displayName?: string;
}
```
- `<EnumDetails canonicalReference="@apollo/client!NetworkStatus:enum" headingLevel={3} />` to print all members of an `enum`.
- `<DocBlock canonicalReference="@apollo/client!ApolloClient:constructor(1)" />` to include the DocBlock of a anything that can be referenced by a canonical reference.
  The props of `DocBlock` follow this shape:
```ts
{
  canonicalReference: string;
  /** defaults to `true`, can be set to `false` to hide the summary section */
  summary?: boolean;
  /** defaults to `false`, can be set to `show` to show the remarks section */
  remarks?: boolean;
  /** defaults to `false`, can be set to `true` to show the example section */
  example?: boolean;
  /** defaults to `false`, can be set to `true` to make the `remarks` section collapsible*/
  remarksCollapsible?: boolean;
  /** defaults to `false`, can be set to `true` to information about deprecation status */
  deprecated?: boolean;
  /** defaults to `false`, can be set to `true` to include a <MinVersion> tag */
  releaseTag?: boolean;
}
```
The `summary`, `remarks`, `example`, and `deprecated` sections reference their respective sections in the DocBlock.
* Headings can be wrapped in `<MinVersion version="3.10.0">` tags to e.g. indicate that the feature is only available in Apollo Client 3.10.0 and later.

## Documentation Guidelines

### Tone

Documentation should be written in an approachable, positive, and encouraging tone. It should be helpful and opinionated. The goal is to make the documentation easy to understand and follow, while also providing clear guidance on best practices.
The target audience is JavaScript and TypeScript developers of all skill levels with different native language backgrounds, so the documentation should be accessible to non-native English speakers as well. Nested sentences and complex non-domain-specific vocabulary should be avoided where possible.
At no point should the documentation be sarcastic, condescending or dismissive of the reader's knowledge or experience.
Spelling and grammar should follow American English conventions.
Content should be framed towards the reader in an active voice (e.g. "You can use the `useQuery` hook to fetch data" instead of "The `useQuery` hook can be used to fetch data"). Passive voice can be used to describe the behavior of the library (e.g. "The `useQuery` hook returns an object containing the query result") as a result of userland code usage.
The use of "we" should be avoided, unless it is used to refer to the Apollo Client team as a whole (e.g. "We recommend using fragment colocation and data masking.").

### Change documentation
If documentation is updated, it should always describe the new status quo and not contain statements like "previously" or "previous behavior".
If new features are added to the documentation, they can include a `<MinVersion version="3.10.0">` tag wrapping the headline of the new feature, to indicate that this feature is only available in Apollo Client 3.10.0 and later.
For features that are introduced in a major version, the `<MinVersion>` tag should not be used, as for each major version, a separate copy of the documentation is maintained.
Currently, this documentation copy is the copy for Apollo Client with the major version 4, so all references to previous versions can be removed.
Never use phrases like "since version 4.0, this or that change applied". Only document the current state of the library, not its history.

### Prefer describing certain APIs over others.

* When having a choice, describe the state of the `dataState` property instead of mentioning `partial`.
* In many cases, be more specific about the `networkStatus` that can be observed instead of using the `loading` property. In some cases it can make sense to mention both.

### Updating DocBlocks
If outdated or incorrect documentation is found in `docs/public/client.api.json`, find the closest parent `fileUrlPath` in the JSON structure and update the original DocBlock in that file. Then run `npm run docmodel` to regenerate the JSON file and read the `docs/public/client.api.json` again.
