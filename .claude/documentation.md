# Documentation specific instructions

Documentation can be found in the `docs/` directory and in the `src/` directory as DocBlocks.

## Data sources

See @docs/source/\_sidebar.yaml for the documentation structure.
DocBlocks can contain comments in the form `{@inheritDoc @apollo/client!QueryOptionsDocumentation#query:member}` to (in this example) include the DocBlock of the `query` member on the `QueryOptionsDocumentation` interface. `@apollo/client!QueryOptionsDocumentation#query:member` is called a "canonical reference" and is used to uniquely identify a DocBlock.
An accumulation of all DocBlocks and their canonical references can be found in @docs/public/client.api.json. This file is generated from the source code by running `npm run docmodel`.
All .json files in the `docs/public/` directory are autogenerated. They can be read, but not modified. Instead, the respective source files in the `src/` directory should be modified, and the JSON file should be regenerated by running `npm run docmodel`.

## DocBlock inheritance

If possible, DocBlocks should not repeat other DocBlocks in other places, but use `@inheritDoc` annotations. For every DocBlock, before adding text, the existing DocBlocks in @src/react/types/types.documentation.ts and @src/utilities/internal/types/DocumentationTypes.ts should always be checked and if possible referenced.

## Available components

For components that can be used in `.mdx` files, reference @docs/shared/MdxProvidedComponents.ts

## Documentation Guidelines

### Tone

Documentation should be written in an approachable, positive, and encouraging tone. It should be helpful and opinionated. The goal is to make the documentation easy to understand and follow, while also providing clear guidance on best practices.
The target audience is JavaScript and TypeScript developers of all skill levels with different native language backgrounds, so the documentation should be accessible to non-native English speakers as well. Nested sentences and complex non-domain-specific vocabulary should be avoided where possible.
At no point should the documentation be sarcastic, condescending or dismissive of the reader's knowledge or experience.
Spelling and grammar should follow American English conventions.
Content should be framed towards the reader in an active voice (e.g. "You can use the `useQuery` hook to fetch data" instead of "The `useQuery` hook can be used to fetch data"). Passive voice can be used to describe the behavior of the library (e.g. "The `useQuery` hook returns an object containing the query result") as a result of userland code usage.
The use of "we" should be avoided, unless it is used to refer to the Apollo Client team as a whole (e.g. "We recommend using fragment colocation and data masking.").

### Change documentation - CRITICAL RULE

**NEVER reference changes, previous versions, or historical behavior in documentation.** Documentation must ONLY describe the current state of the library.

FORBIDDEN phrases and patterns:

- "previously" or "previous behavior"
- "has been restructured" or "has been changed"
- "now takes" or "now provides"
- "in earlier versions"
- "used to be" or "was changed"
- Any reference to what something was like before

CORRECT approach:

- Describe how things work today
- State what the current behavior is
- Explain the current API without comparing to past versions

If new features are added to the documentation, they can include a `<MinVersion version="3.10.0">` tag wrapping the headline of the new feature, to indicate that this feature is only available in Apollo Client 3.10.0 and later.
For features that are introduced in a major version, the `<MinVersion>` tag should not be used, as for each major version, a separate copy of the documentation is maintained.
Currently, this documentation copy is the copy for Apollo Client with the major version 4, so all references to previous versions can be removed.
Never use phrases like "since version 4.0, this or that change applied". Only document the current state of the library, not its history.

### Prefer describing certain APIs over others.

- When having a choice, describe the state of the `dataState` property instead of mentioning `partial`.
- In many cases, be more specific about the `networkStatus` that can be observed instead of using the `loading` property. In some cases it can make sense to mention both.

### Updating DocBlocks

If outdated or incorrect documentation is found in `docs/public/client.api.json`, find the closest parent `fileUrlPath` in the JSON structure and update the original DocBlock in that file. Then run `npm run docmodel` to regenerate the JSON file and read the `docs/public/client.api.json` again.

### DocBlock Guidelines

- Use `@template` to document TypeScript generics, not `@param`
- Example: `@template TData - The type of data returned by the query`
- Use `@param` only for actual function parameters
- Use `@returns` to document return values
- Use `@defaultValue` to document default values for properties in interfaces describing options
- Use `@example` for code examples
